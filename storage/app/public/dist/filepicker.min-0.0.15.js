!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webit=e()}(function(){return function r(u,o,l){function a(t,e){if(!o[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},u[t][0].call(n.exports,function(e){return a(u[t][1][e]||e)},n,n.exports,r,u,o,l)}return o[t].exports}for(var f="function"==typeof require&&require,e=0;e<l.length;e++)a(l[e]);return a}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,u.default)(e).forEach(function(e){(0,r.default)(e,t)||(void 0!==e.classList?e.classList.add(t):e.className+=" "+t)})};var r=o(e("./hasClass")),u=o(e("./rea"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./hasClass":7,"./rea":21}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("./re")),a=r(e("./isArrayLike")),f=r(e("./isEmpty")),s=r(e("./isTextContent"));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function e(t,n){t=(0,l.default)(t);for(var r=(0,a.default)(n)?n:[n],u=0;u<r.length;u++){var o=r[u];(0,a.default)(o)?e(t,o):((0,s.default)(o)&&(o=document.createTextNode((0,f.default)(o)?"":o)),t.appendChild(o))}return n}},{"./isArrayLike":13,"./isEmpty":14,"./isTextContent":15,"./re":20}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){function t(e){var t=e.target;if(o)for(;t&&t!==r;){if(t[a.default](o))return n&&e.preventDefault(),void(l&&l(e,t));t=t.parentNode}else n&&e.preventDefault(),l&&l(e,t)}var r=e.el,u=e.eventName,o=e.querySelector,l=e.cb;return r.addEventListener(u,t),t};var a=(n=e("../other/matchesMethodName"))&&n.__esModule?n:{default:n}},{"../other/matchesMethodName":17}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,u.default)((0,r.default)(arguments,"change"),!1)};var r=o(e("./parseArguments")),u=o(e("./addListener"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./addListener":3,"./parseArguments":6}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,u.default)((0,r.default)(arguments),!0)};var r=o(e("./parseArguments")),u=o(e("./addListener"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./addListener":3,"./parseArguments":6}],6:[function(e,t,n){"use strict";function u(e,t){return t<e.length?e[t]:void 0}function o(e,t){return"string"==typeof u(e,t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r={el:void 0,eventName:void 0,querySelector:void 0,cb:void 0};return function(e,t){return"function"==typeof u(e,t)}(e,0)&&t?(r.el=document,r.cb=u(e,0),r.eventName=t):(o(e,n=0)?r.el=document:(r.el=u(e,n),n+=1),t?r.eventName=t:(r.eventName=u(e,n),n+=1),o(e,n)?(r.querySelector=u(e,n),r.cb=u(e,n+1)):r.cb=u(e,n)),r}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return void 0!==(e=(0,r.default)(e)).classList?e.classList.contains(t):!!e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)","ig"))};var r=(n=e("./re"))&&n.__esModule?n:{default:n}},{"./re":20}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!e.headers)return!1;e=e.headers.get("content-type");return e&&0<=e.indexOf("application/json")}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)(e)?e.json():e.text()};var r=(n=e("./isResponseJson"))&&n.__esModule?n:{default:n}},{"./isResponseJson":8}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,u.default)("POST",e,t).then(r.default)};var r=o(e("./jsonOrText")),u=o(e("./request"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./jsonOrText":9,"./request":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r={headers:{"X-Requested-With":"XMLHttpRequest"},method:e};void 0!==n&&("GET"==e?(e=(0,u.default)(n).toString(),console.log(e),t+=e?"?"+e:""):r.body=(0,u.default)(n));return fetch(t,r)};var u=(n=e("./urlParams"))&&n.__esModule?n:{default:n}},{"./urlParams":12}],12:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=function e(t,n,r){void 0===n&&(n=[]);void 0===r&&(r=[]);for(var u in t){var o=Array.from(n);o.push(u),"object"===l(t[u])?r=e(t[u],o,r):r.push([o,t[u]])}return r}(e),n=new URLSearchParams,r=0;r<t.length;r++)n.append(function(e){for(var t="",n=0;n<e.length;n++)t+=0==n?e[n]:"["+e[n]+"]";return t}(t[r][0]),t[r][1]);return n}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"[object Array]"===Object.prototype.toString.call(e)||"[object NodeList]"===Object.prototype.toString.call(e)}},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null==e}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"string"==typeof e||"number"==typeof e||null==e}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("./setAttributes")),a=r(e("./append"));function r(e){return e&&e.__esModule?e:{default:e}}n.default={Fragment:"fragment",h:function(e,t){var n;if(e===this.Fragment?n=new DocumentFragment:"function"==typeof e?n=e(t):(n=document.createElement(e),t&&(0,l.default)(n,t)),n){for(var r=arguments.length,u=new Array(2<r?r-2:0),o=2;o<r;o++)u[o-2]=arguments[o];(0,a.default)(n,u)}return n}}},{"./append":2,"./setAttributes":24}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="matches",r=r=(n.default=void 0)!==Element.prototype.msMatchesSelector?"msMatchesSelector":r;n.default=r},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n;e="string"==typeof e?(n=document,e):(n=e,t);return n.querySelector(e)}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n;e="string"==typeof e?(n=document,e):(n=e,t);return n.querySelectorAll(e)}},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"string"!=typeof e?e:(0,r.default)(e)};var r=(n=e("./q"))&&n.__esModule?n:{default:n}},{"./q":18}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"string"!=typeof e?"object"!=u(e)||void 0===e.tagName?e:[e]:(0,r.default)(e)};var r=(n=e("./qa"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"./qa":19}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,r.default)(e).forEach(function(e){void 0!==e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","ig"),"")})};var r=(n=e("./rea"))&&n.__esModule?n:{default:n}},{"./rea":21}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r,u;"string"==typeof e?(u=t,r=(0,o.default)(document,e)):"string"==typeof t&&void 0!==n?(u=n,r=(0,o.default)(e,t)):(r=e,u=t);return r?(r.innerHTML="",l.default)(r,u):u};var o=r(e("./q")),l=r(e("./append"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./append":2,"./q":18}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,u=(e=(0,l.default)(e)).tagName.toUpperCase();for(r in t)if(t.hasOwnProperty(r))if(n=t[r],"data-"==(r="className"==r?"class":r).substr(0,5))e.dataset[r.substr(5)]=n;else if("style"==r)for(var o in n)e.style[o]=n[o];else"checked"==r&&"INPUT"==u?e.checked=!!n:e.setAttribute(r,(0,a.default)(n)?"":n)};var l=r(e("./re")),a=r(e("./isEmpty"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./isEmpty":14,"./re":20}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){h=e,d.default.set("uploadsHost",t.uploadUrl),d.default.set("autoUpload",t.autoUpload),M=t.onSuccess,j=t.clearSuccess,g=[],void 0!==t.metaFields&&(g=t.metaFields);(0,o.default)(h,"[type=file]",function(e,t){(0,u.default)(h,"file-picker--dragover"),q(b=b.concat(m(t.files))),S()}),(0,f.default)(h,"dragenter",function(){(0,l.default)(h,"file-picker--dragover")}),(0,f.default)(h,"dragover"),(0,f.default)(h,"drop",function(e){(0,u.default)(h,"file-picker--dragover"),q(b=b.concat(m(e.dataTransfer.files))),S()}),(0,f.default)("click",".file-picker__buttons button",function(){P()}),t.submitButton&&(0,f.default)(t.submitButton,"click",function(){P()});return{submit:function(){P()}}};var r=y(e("dom-helpers/src/replaceContent")),u=y(e("dom-helpers/src/removeClass")),o=y(e("dom-helpers/src/event/change")),l=y(e("dom-helpers/src/addClass")),a=y(e("dom-helpers/src/append")),f=y(e("dom-helpers/src/event/onp")),s=y(e("dom-helpers/src/jsx")),i=y(e("dom-helpers/src/q")),d=y(e("./state")),c=y(e("./requests/createUpload")),p=y(e("./requests/finishUpload")),v=y(e("./requests/uploadFile"));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=null,b=[],g=[],M=null,j=null,O=20971520;function P(){console.log("submit"),(0,c.default)(function(){console.log("createUpload done");var t={};g.forEach(function(e){t[e.name]=e.getValue()}),(0,p.default)(t,function(){M?M():(0,l.default)(h,"file-picker--success"),q(b=[]),g.forEach(function(e){return e.clear()}),(0,i.default)(h,"[type=file]").value="",setTimeout(function(){j?j():(0,u.default)(h,"file-picker--success")},4e3)})})}function S(){(0,c.default)(function(){for(var e=b,t=0;t<e.length;t++)e[t].size>O?(0,i.default)(h,"file-picker__file-list li:nth-of-type("+(t+1)+") span").innerHTML="Par lielu ("+Math.round(e[t].size/1024/1024)+"Mb)":(0,v.default)(e[t],function(e){return function(){(0,i.default)(h,".file-picker__file-list li:nth-of-type("+(e+1)+") span").innerHTML="100%",0}}(t))})}function q(e){if((0,r.default)((0,i.default)(h,".file-picker__file-list")),0<e.length){for(var t=0;t<e.length;t++)(0,a.default)((0,i.default)(h,".file-picker__file-list"),s.default.h("li",null,s.default.h("a",null,e[t].name),s.default.h("span",null,"0%")));(0,l.default)(h,"file-picker--file-list")}else(0,u.default)(h,"file-picker--file-list")}},{"./requests/createUpload":26,"./requests/finishUpload":27,"./requests/uploadFile":28,"./state":29,"dom-helpers/src/addClass":1,"dom-helpers/src/append":2,"dom-helpers/src/event/change":4,"dom-helpers/src/event/onp":5,"dom-helpers/src/jsx":16,"dom-helpers/src/q":18,"dom-helpers/src/removeClass":22,"dom-helpers/src/replaceContent":23}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("dom-helpers/src/http/post")),u=o(e("../state"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(t){u.default.get("uploadId")?t():(0,r.default)(u.default.get("uploadsHost")+"/new").then(function(e){u.default.set("uploadId",e.hash),t()})}},{"../state":29,"dom-helpers/src/http/post":10}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("dom-helpers/src/http/post")),u=o(e("../state"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t){(0,r.default)(u.default.get("uploadsHost")+"/finish",{upload:u.default.get("uploadId"),meta:e}).then(function(e){u.default.set("uploadId",null),t()})}},{"../state":29,"dom-helpers/src/http/post":10}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../state"))&&e.__esModule?e:{default:e};n.default=function(e,t){var n=new FormData;n.append("file",e),n.append("upload",r.default.get("uploadId")),fetch(r.default.get("uploadsHost")+"/upload",{headers:{"X-Requested-With":"XMLHttpRequest"},method:"POST",body:n}).then(function(e){return e.text()}).then(function(e){t()})}},{"../state":29}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={};n.default={set:function(e,t){r[e]=t},get:function(e){return r[e]}}},{}]},{},[25])(25)});